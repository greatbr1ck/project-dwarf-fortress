<h1>Описание проекта</h1>
Проект – игра, похожая на Dwarf Fortress. Игровой мир – квадратное поле (заданного фиксированного размера) - подземелье. 

<h2>Дварфы</h2>
Игрок управляет отрядом дварфов (численность отряда выбирается пользователем в самом начале игры), каждый из дварфов имеет определенную рабочую обязанность: «воин» (warrior) или «целитель» (healer). Выбирая отряд дварфов, игрок задает каждому уникальное имя и обязанность. Каждый дварф имеет ровно одну рабочую обязанность и не может менять ее во время игры. Внутри отряда могут быть несколько дварфов могут иметь одну и ту же обязанность, некоторые обязанности могут отсутствовать вовсе.  
Дварф, обладающий обязанностью «воин», может пользоваться оружием, которое несет, то есть пользоваться в бою его характеристиками. Каждый инструмент (про которые будет сказано ниже) имеет величину урона. Поэтому имея в инвентаре секиру (Axe) дварф-воин может наносить врагу урон этой секиры. По умолчанию дварф без оружия (и инструментов) обладает уроном 1.
Дварф-целитель не может наносить урон > 1, даже обладая оружием. Зато целитель может в свой ход обменять один слиток золота (Worked Gold) на +2 единицы здоровья любому живому дварфу (себе в том числе), чего не умеет воин.

Помимо этого, дварфы способны воевать, переносить вещи и добывать руду. Эти качества присущи всем дварфам независимо от обязанности. 

Как только дварф создан, он снабжается киркой (деревянной - Wooden Axe - в случае воина и каменной - Stone Axe - в случае целителя).
Деревянная кирка позволяет добывать уголь и камень, каменная - все то же самое, но еще железо и золото.
Золото - самый редкий металл, и самый полезный. Инструменты нельзя сделать из подручных средств, но можно купить за 1 золотой слиток. 

Таким образом, добыть кучу камня, чтобы построить крепость и запереть в ней целителей, не получится, если вы хотите иметь от целителей хоть сколько-то пользы.

Каждый дварф имеет ограниченный инвентарь на 20 позиций. Это значит, что с его переполнением дварф не сможет ничего добывать. Для этого существует возможность выкидывать вещи из инвентаря. Вещи инвентаря делятся на блоки (обработанный камень - 'Worked Stone', железный слиток - 'Worked Iron', золотой слиток - 'Worked Gold' и уголь - 'Coal') и инструменты (каменная кирка - 'Stone Pickaxe', деревянная кирка - 'Wooden Pickaxe', секира - 'Axe'). Дварф может пометить любой блок внутри своего инвентаря как мусор, а затем выкинуть весь мусор. Для этого игрок задает прямоугольную область на поле, дварф идет туда и выкидыввает мусор, заполняя область блоками, пока не кончится область или мусор в инвентаре.

Кроме того, дварфу можно поручить добыть все доступные для его добычи блоки на некоторой прямоугольной области. Для этого пользователь аналогично задает область, дварф идет туда и добывает блоки.

Помимо этих двух сложных задач, которые выполняются за несколько ходов, дварфу можно поручить поставить перед собой блок обработанного камня (если имеется в инвентаре), выложить 1 мусорный элемент на 1 блок перед собой.

Разумеется, чтобы это сделать, дварф должен различать стороны. Ориентация на карте - (север, юг, запад, восток) есть (верх, низ, лево, право). Параметр "направление" (direction) говорит дварфу, куда он смотрит. Пользователь может менять направление дварфа неограниченное число раз за ход. 

Собственно, единственные команды, которыми можно пользоваться лишь 1 раз за ход, являются - отправить дварфа выкидывать мусор на область, отправить дварфа добывать на некоторой области, отправить дварфа пешком в некоторую точку. 

Сложные задачи можно прерывать, давая дварфу другую сложную задачу. Имеется в виду, что пользователь не обязан ждать завершения дварфом выданной задачи, вместо этого дварфу можно дать новую задачу. На следующий ход дварф будет выполнять новую задачу.

Есть также несколько способов, позволяющих пользователю посмотреть, что знает конкретный дварф. 

Первая команда (inf) позволяет увидеть здоровье, наносимый врагам урон, координаты, выполняемую задачу (см. выше о задачах, которые выполняются не за 1 ход) и область видимости. Под областью видимости понимается небольшой квадратный участок игрового поля, в центре которого стоит данный дварф, иными словами - радиус, внутри которого дварф видит актуальную информацию (остальных существ, блоки и т.п.). Вне этого радиуса дварф ничего не видит (такие клетки обозначены F).

Вторая команда (map) позволяет увидеть карту пещер. Путешествуя по полю, дварф запоминает координаты всех видимых клеток (см прошлый пункт) - то есть тех, на которых не стоит руда и камень, и наносит их на карту. Она позволяет определять, может ли дварф дойти до некоторой заданной точки. Заметим, что для выполнения любой команды длительного действия, дварфу нужно добраться до некоторой точки в качестве подзадаче (например, в случае с добычей области и выкидываением мусора на область, дварф сначала доходит до ближайшей к нему клетки этой области). Дварф понимает, может ли он достичь заданной точки (области), если на карте map существует некоторый путь в эту точку. Иначе дварф команду не выполнит.

Третья команда (inv) позвояет посмотреть на инвентарь дварфа, где перечислены названия предметов (как в multiset), напротив каждого названия указано - помечен ли предмет как мусор или нет.

Таким образом, вот команды, доступные игроку:

повороты направления:

w #повернуться лицом к северу
a #повернуться лицом к западу
s #повернуться лицом к югу
d #повернуться лицом к востоку

движение:

mv
row col #row, col - целочисленные коодинаты строчки и столбца клетки назначения

добыча:

mn #добыть блок перед собой

mna
row1 col1
row2 col2 #Добыть область. row1, col1, row2, col2 - есть целочисленные координаты левого верхнего и правого нижнего углов, задающих область #добычи

информация:

inf #показать общую информацию
map #показать карту пещер
inv #показать инвентарь

постройка:

b #поставить блок обработанного камня перед собой

выброс мусора:

mk
name #пометить блок с названием name в инвентаре как мусор

t
row1 col1
row2 col2 #Выкинуть мусор в область. row1, col1, row2, col2 - есть целочисленные координаты левого верхнего и правого нижнего углов, задающих #область

завершение хода:

f #игрок печает f, чтобы закончить ход данного дварфа

покупка (обмен):

g
name #получить инструмент с названием name, если это корректно, в обмен на 1 слиток золота

лечение:

h
name #может быть вызвана только от дварфа-целителя. name - имя дварфа, которому данный дварф дает здоровье, при наличии 1 золотого слитка

<h2>Процесс игры</h2>

В начале игры происходит псевдослучайная генерация мира. Мир генерируется по слоям. В пещерах появляются гоблины.
Дварфы появляются внутри одной пещеры, изначально стоят вплотную друг ко другу.

Каждый игровой ход начинается с того, что пользователь определяет набор команд для каждого живого дварфа. Переходом от одного дварфа к другому является команда f. После выполнения f нельзя продолжить играть за того же дварфа внутри ЭТОГО хода (имеется в виду, что придется сначала сыграть за всех остальных дварфов).

После того, как пользователь сходит за каждого дварфа, ходят гоблины. Гоблины могут ходить по игровому полю, перемещаясь только по клеткам пещер. Всякий раз, видя дварфа на клетке, соседней с клеткой гоблина по стороне или диагонали, гоблин атакует, нанося урон -2. Итак, гоблин наносит урон всем дварфам на соседних с его клетках. 

Дварфы тоже наносят урон всем соседним гоблинам (понятие соседней клетки определено в точности так же) независио от действий игрока. Разница с поведением гоблинов лишь в том, что дварфы атакуют первыми - они это делают в начале игрового хода (то есть до того, как пользователь сходит за всех дварфов), а гоблины - после.

Каждый дварф имеет первоначально здоровье 5, как и каждый гоблин. Целитель может только пополнять здоровье дварфов, не делая его больше пяти. 
Дварф может убить гоблина, сделав его здоровье <= 0. Здоровье гоблина никак пополнится не может. Гоблин тоже может убить дварфа. 
Во время атаки выводится сообщение об атакующем, его здоровье, и в случае атаки на дварфа - о повреждениях дварфа. Убитого дварфа нельзя воскресить.

<h2>Игровой мир</h2>
Каждый дварф не может сломать тайл, не добыв его (то есть не положив в свой инвентарь).
Дварфы не могут ходить нигде кроме пещер. Пещерой становится любая область под землей, где нет блоков (типы поземных блоков: руда [железо, золото], камень, уголь. Дварф может ходить по блокам обработанного камня. Гоблинам эта опция не доступна.

Гоблины – единственный тип монстров в игре. Гоблины рандомно распределяются по пещерам во время генерации мира. Гоблин ходит корректно, но случайно.

<h1>Функционал</h1>
Игроку доступны области видимости дварфов, карты, инвентари и полоски здоровья.   
Игровое поле – из ASKII символов, как оригинальная игра.

Вся информация, необходимая для взаимодействия персонажей, находится внутри environment. Там лежат константы, игровое поле, поле взаимодейтствия, список гоблинов и список дварфов.
Массив entities содержит экземпляр класса по координате [row, col], если в этой точке стоит дварф или гоблин.


<h1>Архитектура</h1>
<h2>Классы</h2>

<h3>Окружение</h3>

#виды тайлов поля
KINDS_OF_DUNGEON_TILES = dict([('Unknown', 'F'), ('Cave', ' '), ('Coal', '+'), ('Stone', '.'), ('Iron', '*'), ('Gold', '^'), ('Worked Stone', 'O')])

#виды профессий дварфов
KINDS_OF_DWARFES_PROFESSIONS = {'Warrior', 'Healer'}

#направления движения
DIRECTIONS = dict([('North', 0), ('South', 1), ('West', 2), ('East', 3)])

#инструменты из инвентаря
INSTRUMENTS = dict([('Stone Pickaxe', 'T'), ('Wooden Pickaxe', '7'), ('Axe', 'P'), ('Wooden Stick', '/')])

#блоки из инвентаря
BLOCKS = dict([('Worked Stone', 'O'), ('Worked Iron', '#'), ('Worked Gold', '$'), ('Coal', '*')])

#размер игрового поля
SIZE_OF_FIELD

#максимальный радиус пещеры
MAX_CAVE_RADIUS 

#максимальное число пещер
MAX_CAVE_NUMBER 

#тайл - представляет собой единицу поля
class Tile:
    #название типа тайла
    tile_type

#окружение - хранит в себе всю основную информацию игры
class Environment:        
    #игровое поле
    dungeon = [[KINDS_OF_DUNGEON_TILES['Cave']] * SIZE_OF_FIELD for _ in range(SIZE_OF_FIELD)]

    #игровое время
    timer = 0
    
    #список экземпляров классов живых дварвов
    dwarfs_list = []

    #список экземпляров классов живых гоблинов
    goblins_list = []

    #entities обеспечивает доступ к изменению любого экземпляра класса, зная координату персонажа
    #level 0 stands for field, level 1 stands for dungeon - пережиток первой концепции с наземным уровнем
    entities = [[['None'] * SIZE_OF_FIELD for _ in range(SIZE_OF_FIELD)] for i in range(2)]

    def __init__(self, entities_list):
        #инициализация списком экземпляров
        pass
    
    #добавить гоблинов в entities. Нужна в связи с сложным построением поля
    def update_entities(self):
        pass

    #существует ли живой дварф с таким именем
    def dwarf_exists(self, name):
        pass

    #получить экземпляр класса дварфа по данному имени дварфа
    def get_dwarf(self, name):
        pass
    
    #изменить объект дварфа, соответствующего данному имени, внутри entities (так чтобы всем остальным экземплярам стало видно)
    def update_dwarf(self, name, updating_dwarf):
        pass

    #получить экземпляр класса по координатам персонажа
    def get_entity(self, coords):
        pass

<h3>Дварфы</h3>

#вещи, поместимые в инвентарь
class Thing:    
    #урон от использования вещи в бою
    damage = 0

  	#пометка, является ли мусором
    is_garbage = False

    def __init__(self, name):
        #название вещи
        self.name = name

#инвентарь дварфа
class Inventory:
    #максимальная вместимость инвентаря
    max_size = 20

    def __init__(self):
        #список вещей
        self.content = []
        
        #размер заполненной части
        self.size = 0
    
    #полон ли инвентарь
    def is_filled(self):
        pass
   
    #пометить вещь как мусор
    def mark_garbage(self, name):
        pass
    
    #показать инвентарь
    def show_items(self):
        pass

    #выкинуть весь мусор
    def throw_garbage(self):
        pass
    
    #содержит ли инвентарь вещь с таким именем
    def contains(self, item_name):
        pass
  
    #положить вещь в инвентарь 
    def put_item(self, item_name):
        pass
    
    #можно ли добыть тайл, используя вещи в инвентаре
    def can_mine_item(self, item):
        pass

    #выкинут ли мусор
    def is_garbage_thrown(self):
        pass

    #выкинуть еще один мусорный предмет
    def throw_next(self):
        pass

    #убрать предмет из инвентаря (не обязательно мусорный)
    def extract_item(self, item):
        pass

#дварфы
class Dwarf:
    #раса
    race = 'dwarf'
    
    #радиус видимости
    radius_to_see = 3
    
    #максимальное здоровье
    max_health = 5

    #текущее здоровье
    health = max_health

    #инвентарь
    inventory = Inventory()

    #жив ли
    is_alive = True

    #тайл, на котором дварф сейчас стоит (нужно знать, поскольку дварфы могут стоить на пещере или на обработанном камне)
    standing_tile = environment.KINDS_OF_DUNGEON_TILES['Cave']

    def __init__(self, profession, name, coords):
        #рабочая обязанность
        self.profession = profession
        
        #имя
        self.name = name

        #координаты - кортеж of (level, row, col) #level снова пережиток прошлого
        coords

    #чем занят дварф (см длительные команды)
    doing_command = 'Nothing'

    #куда дварф идет, если doing_command == 'Move...'
    destination_coords = (1, -1, -1)

    #добываемая область
    coords1 = (1, -1, -1)
    coords2 = (1, -1, -1)

    #свалка
    dump_coords1 = (1, -1, -1)
    dump_coords2 = (1, -1, -1)

    #куда смотрит дварф
    direction = 'North'

    #карта пещер
    caves_map = [[environment.KINDS_OF_DUNGEON_TILES['Unknown']] * environment.SIZE_OF_FIELD for _ in range(environment.SIZE_OF_FIELD)]

    #получить область видимости
    def get_visibility(self, env):
        pass

    #показать область видимости
    def show_visibility(self, env):
        pass
    
    #наносимый врагам урон
    def get_damage(self):
        pass

    #атаковать врагов
    def fight(self, env):
        pass

    #пострадать (получить урон в бою)
    def hit(self, damage, environment):
        pass

    #умереть (дварфы могут умирать в бою)
    def die(self, environment):
        pass

    #передвинуться в сторону заданных координат
    def move(self, coords, env):
        pass

    #добыть тайл с заданными координатами
    def mine(self, tile_coords, env):
        pass

    #выкинуть мусор из инвентаря
    def throw(self, tile_coords, env):
        pass
    
    #поставить 1 блок Обработанного Камня перед собой
    def build(self, env):
        pass

    #отметить как мусор вещь из инвентаря
    def mark_garbage(self, item):
        pass

<h3>Гоблины</h3>
#!/usr/bin/python

import random
import environment

INF = environment.SIZE_OF_FIELD * environment.SIZE_OF_FIELD + 1

#гоблины. На самом деле его поля и методы во многом совпадают по определениям с аналогичными у дварфа
class Goblin:
    #race
    race = 'goblin'
    
    #radius of field/dungeon that goblin can see
    radius_to_see = 3
    
    #max health
    max_health = 5

    #current health
    health = max_health
    
    #shows is creature is alive
    is_alive = True

    #type of tile the creature is standing on
    standing_tile = environment.KINDS_OF_DUNGEON_TILES['Cave']

    def __init__(self, coords):
        #goblin coords - turple of (level, row, col)
        self.coords = coords
    
    #get the damage value 
    def get_damage(self):
        pass

    #attack enemies
    def fight(self, env):
        pass

    #hit with damage
    def hit(self, damage, environment):
        pass

    #die
    def die(self, environment):
        pass
    
    #move
    def move(self, env):
        pass

<h2>Функции</h2>

#получить список координат дварфов (где они заспавнились при создании мира)
def get_initial_dwarf_coords(number_of_dwarfes):
    pass

#заполнение области цветом - нужно при генерации поля по слоям
def fill_area(field, start, color, radius):
    pass

#генерация подземелья - игрового поля
def generate_dungeon(initial_coords):
    pass

#иниациализация игры
def init_game():
    pass

#функции для пользователя

#inf
def get_dwarf_info(dwarf_name, env):
    pass

#inv
def show_dwarf_inventory(dwarf_name, env):
    pass

#map
def get_map(dwarf_name, env):
    pass

#mv
def move(dwarf_name, destination_coords, env):
    pass

#mn
def mine(dwarf_name, env):
    pass

#mna
def mine_area(dwarf_name, coords1, coords2, env):
    pass

#вспомогательная функция для t - выкинуть 1 мусорный элемент перед собой
def throw(dwarf_name, env):
    pass

#повернуться на 180 градусов
def turn_around(dwarf_name, env):
    pass

#t
def throw_area(dwarf_name, coords1, coords2, env):
    pass

#b
def build_block(dwarf_name, env):
    pass

#mk
def mark_as_garbage(dwarf_name, item_name, env):
    pass

#h
def heal(dwarf_name, other_name):
    pass
  
#help - получить подсказки по используемым игроком коммандам
def help():
    pass

#describe - получить подсказки по значениям символов на поле и в инвентаре
def describe():
    pass

#инициализировать игру
env = init_game()
while True:
    #здесь игрок и программа ходят по очереди за дварфов и гоблинов соответственно